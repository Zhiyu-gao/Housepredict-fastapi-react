# ğŸ  House Price Prediction System

**React + FastAPI + MySQL + Machine Learning + AI Agent + Crawler + LangGraph**

ä¸€ä¸ª**å·¥ç¨‹çº§å…¨æ ˆæˆ¿ä»·é¢„æµ‹ä¸åˆ†æç³»ç»Ÿ**ï¼Œèåˆäº†ï¼š

* âœ… çœŸå®æˆ¿æºæ•°æ®é‡‡é›†ï¼ˆé“¾å®¶çˆ¬è™«ï¼‰
* âœ… ä¼ ç»Ÿæœºå™¨å­¦ä¹ æˆ¿ä»·é¢„æµ‹
* âœ… å¤šå¤§æ¨¡å‹ AI åˆ†æï¼ˆKimi / Qwen / DeepSeekï¼‰
* âœ… LangGraph é©±åŠ¨çš„å¤šæ­¥éª¤æ™ºèƒ½åˆ†æ Agent
* âœ… å‰åç«¯åˆ†ç¦»æ¶æ„ + å¾®æœåŠ¡è®¾è®¡

---

## âœ¨ é¡¹ç›®äº®ç‚¹ï¼ˆTL;DRï¼‰

* **ä¸æ˜¯å‡æ•°æ®**ï¼šé“¾å®¶çœŸå®äºŒæ‰‹æˆ¿çˆ¬è™«
* **ä¸æ˜¯å•æ¨¡å‹**ï¼šä¼ ç»Ÿ ML + å¤§æ¨¡å‹ååŒ
* **ä¸æ˜¯ç®€å•è°ƒç”¨ LLM**ï¼šLangGraph ç¼–æ’æ¨ç†æµç¨‹
* **ä¸æ˜¯ demo**ï¼šJWTã€CRUDã€Alembicã€Docker å…¨é½
* **ä¸æ˜¯è€¦åˆæ¶æ„**ï¼šä¸šåŠ¡åç«¯ / AI æœåŠ¡ / çˆ¬è™«å®Œå…¨è§£è€¦

---

## ğŸš€ ç³»ç»Ÿæ•´ä½“æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend  â”‚â”€â”€â”€â”€â”€â–¶â”‚  Backend   â”‚â”€â”€â”€â”€â”€â–¶ MySQL
â”‚  (React)   â”‚      â”‚ (FastAPI)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   AI Service   â”‚
                  â”‚  (FastAPI +    â”‚
                  â”‚   LangGraph)   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

            â–²
            â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  Crawler   â”‚
     â”‚ (Lianjia)  â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© åŠŸèƒ½æ¨¡å—æ¦‚è§ˆ

### ğŸ”§ Backendï¼ˆFastAPI Â· ç«¯å£ 8000ï¼‰

**æ ¸å¿ƒèŒè´£ï¼šä¸šåŠ¡ç³»ç»Ÿ + æ•°æ®ç®¡ç†**

* æˆ¿æº CRUDï¼ˆå¢ / åˆ  / æ”¹ / æŸ¥ï¼‰
* ç”¨æˆ·æ³¨å†Œ / ç™»å½•ï¼ˆJWTï¼‰
* ä¼ ç»Ÿæœºå™¨å­¦ä¹ æˆ¿ä»·é¢„æµ‹
* çˆ¬è™«æ•°æ®å¯¼å…¥ & æ ‡æ³¨
* MySQL æŒä¹…åŒ–
* Alembic æ•°æ®åº“è¿ç§»

**ä¸»è¦æ¥å£ï¼š**

| Method | Path           | Description |
| ------ | -------------- | ----------- |
| POST   | `/auth/login`  | ç”¨æˆ·ç™»å½•        |
| GET    | `/auth/me`     | å½“å‰ç”¨æˆ·        |
| GET    | `/houses`      | æˆ¿æºåˆ—è¡¨        |
| POST   | `/predict`     | ML æˆ¿ä»·é¢„æµ‹     |
| POST   | `/crawl/house` | å¯¼å…¥çˆ¬è™«æˆ¿æº      |

---

### ğŸ¤– AI Serviceï¼ˆFastAPI Â· ç«¯å£ 8080ï¼‰

**æ ¸å¿ƒèŒè´£ï¼šAI æ¨ç† & Agent ç¼–æ’**

#### æ”¯æŒçš„å¤§æ¨¡å‹

* **Kimi**
* **Qwen**
* **DeepSeek**

ï¼ˆå…¨éƒ¨é€šè¿‡ OpenAI å…¼å®¹åè®®è°ƒç”¨ï¼‰

#### æ ¸å¿ƒèƒ½åŠ›

* æˆ¿ä»· AI åˆ†æï¼ˆMarkdown è¾“å‡ºï¼‰
* å¤šæ¨¡å‹ç»Ÿä¸€æ¥å£
* Prompt é›†ä¸­ç®¡ç†
* LangGraph é©±åŠ¨çš„å¤šæ­¥éª¤åˆ†ææµç¨‹

```text
ai_service/app/
â”œâ”€â”€ ai/
â”‚   â””â”€â”€ graph.py          # LangGraph åˆ†ææµç¨‹å®šä¹‰
â”œâ”€â”€ price_analysis_service.py
â”œâ”€â”€ providers/
â”‚   â”œâ”€â”€ kimi_client.py
â”‚   â”œâ”€â”€ qwen_client.py
â”‚   â””â”€â”€ deepseek_client.py
â”œâ”€â”€ prompts/
â”‚   â””â”€â”€ price_analysis.py
```

---

### ğŸ§  LangGraph æ™ºèƒ½åˆ†æ Agentï¼ˆå®éªŒæ€§ï¼‰

> ç”¨äºæ„å»º **â€œå¯è§£é‡Šã€å¤šæ­¥éª¤ã€å¯æ‰©å±•â€** çš„æˆ¿ä»·åˆ†æ Agent

* å°† **ä¼ ç»Ÿ ML é¢„æµ‹ç»“æœ** ä½œä¸ºè¾“å…¥èŠ‚ç‚¹
* è‡ªåŠ¨è§¦å‘ï¼š

  * æˆ¿ä»·åˆç†æ€§åˆ¤æ–­
  * é£é™©åˆ†æ
  * ä¹°å–å»ºè®®ç”Ÿæˆ
* æ”¯æŒæœªæ¥æ‰©å±•ï¼š

  * å¤šæˆ¿æºå¯¹æ¯”
  * æŠ•èµ„å†³ç­– Agent
  * è‡ªåŠ¨æŠ¥å‘Šç”Ÿæˆ

---

### ğŸ•· æˆ¿æºçˆ¬è™«ç³»ç»Ÿï¼ˆé“¾å®¶ Lianjia Spiderï¼‰

**ç”¨äºé‡‡é›†çœŸå®äºŒæ‰‹æˆ¿æ•°æ®**

#### ç‰¹ç‚¹

* **å¿…é¡»ä½¿ç”¨æœ‰å¤´æµè§ˆå™¨**
* Cookie ç™»å½•æ€å¤ç”¨
* ä¸ä¸šåŠ¡ç³»ç»Ÿå®Œå…¨è§£è€¦
* ç»“æœä»¥ JSON å½¢å¼è½ç›˜

#### ç›®å½•ç»“æ„

```text
backend/app/spider/lianjia/
â”œâ”€â”€ login_save_state.py     # æ‰‹åŠ¨ç™»å½•å¹¶ä¿å­˜ cookie
â”œâ”€â”€ lianjia_spider.py       # ä¸»çˆ¬è™«è„šæœ¬
â”œâ”€â”€ lianjia_state.json      # ç™»å½•æ€
â””â”€â”€ lianjia_json/           # çˆ¬å–ç»“æœï¼ˆJSONï¼‰
```

#### ä½¿ç”¨æ­¥éª¤ï¼ˆéå¸¸é‡è¦ï¼‰

**â‘  å…ˆä¿å­˜ç™»å½•æ€ï¼ˆæœ‰å¤´æµè§ˆå™¨ï¼‰**

```bash
cd backend
python app/spider/lianjia/login_save_state.py
```

* ä¼šå¯åŠ¨ Chromium
* æ‰‹åŠ¨ç™»å½•é“¾å®¶
* è‡ªåŠ¨ä¿å­˜ cookie åˆ° `lianjia_state.json`

**â‘¡ å†å¯åŠ¨çˆ¬è™«**

```bash
cd backend
python -m app.spider.lianjia.lianjia_spider
```

æ•°æ®å°†ä¿å­˜åˆ°ï¼š

```text
backend/app/spider/lianjia/lianjia_json/
```

---

### ğŸ’» Frontendï¼ˆReact + Vite + Ant Design Â· ç«¯å£ 5173ï¼‰

* JWT ç™»å½• / æ³¨å†Œ
* å·¦ä¾§å›ºå®šå¯¼èˆª
* é¡µé¢åŒ…æ‹¬ï¼š

  * é¡¹ç›®ä»‹ç»
  * æˆ¿ä»·é¢„æµ‹ï¼ˆMLï¼‰
  * AI åˆ†æï¼ˆå¤šæ¨¡å‹ï¼‰
  * æˆ¿æºç®¡ç†ï¼ˆCRUDï¼‰
  * å¯è§†åŒ–å¤§å±
  * å…ƒæ•°æ®æ ‡æ³¨åå°
  * çˆ¬è™«ä»»åŠ¡é¡µé¢

---

## ğŸ§± é¡¹ç›®ç»“æ„æ€»è§ˆ

```text
house-price/
â”œâ”€â”€ backend/        # ä¸šåŠ¡åç«¯ï¼ˆFastAPI + ML + DBï¼‰
â”œâ”€â”€ ai_service/     # AI æœåŠ¡ï¼ˆFastAPI + LangGraphï¼‰
â”œâ”€â”€ frontend/       # å‰ç«¯ï¼ˆReactï¼‰
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

---

## âš™ï¸ ç¯å¢ƒè¦æ±‚

* Python â‰¥ 3.11ï¼ˆæ¨è `uv`ï¼‰
* Node.js â‰¥ 18
* MySQL â‰¥ 8
* Playwrightï¼ˆç”¨äºçˆ¬è™«ï¼‰

